# PillTrack - Raspberry Pi 5 Edition
## à¸£à¸°à¸šà¸šà¸£à¸°à¸šà¸¸à¸¢à¸²à¹€à¸¡à¹‡à¸”à¹à¸šà¸šà¹€à¸£à¸µà¸¢à¸¥à¹„à¸—à¸¡à¹Œ

```
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘    ðŸ”§ PillTrack à¸šà¸™ Raspberry Pi 5    â•‘
   â•‘  à¸£à¸°à¸šà¸šà¸£à¸°à¸šà¸¸à¸¢à¸²à¸ˆà¸²à¸à¸à¸¥à¹‰à¸­à¸‡à¹à¸šà¸šà¹€à¸£à¸µà¸¢à¸¥à¹„à¸—à¸¡à¹Œ    â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ðŸ“‹ à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š

### à¸®à¸²à¸£à¹Œà¸”à¹à¸§à¸£à¹Œ
- **Raspberry Pi 5** (8GB RAM à¸‚à¸¶à¹‰à¸™à¹„à¸›)
- **à¹€à¸¡à¸¡à¹‚à¸£à¸£à¸µ**: 8GB+ LPDDR5
- **à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥**: 64GB microSD (USB SSD à¸¢à¸´à¹ˆà¸‡à¸”à¸µ)
- **à¸à¸¥à¹‰à¸­à¸‡**: Picamera2 à¸«à¸£à¸·à¸­ USB Webcam
- **à¹„à¸Ÿà¸Ÿà¹‰à¸²**: 27W USB-C Power Supply

### à¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œ
- **OS**: Raspberry Pi OS 64-bit (Bookworm)
- **Python**: 3.8+ (à¸•à¸´à¸”à¸¡à¸²à¸à¸±à¸š Pi OS)
- **CUDA**: à¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™ (à¹ƒà¸Šà¹‰ CPU)

---

## ðŸš€ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ (Fixed for Python 3.13)

### âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸³à¸„à¸±à¸
à¸à¸£à¸“à¸µ Python 3.13 à¸­à¸²à¸ˆà¸žà¸šà¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” numpy build  
ðŸ‘‰ **à¹ƒà¸Šà¹‰ script à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´** (à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡) à¸”à¹‰à¸§à¸¢ `--prefer-binary`

### 1ï¸âƒ£ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Raspberry Pi

```bash
# à¸­à¸±à¸›à¹€à¸”à¸•à¸£à¸°à¸šà¸š
sudo apt update && sudo apt upgrade -y

# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ build tools à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™
sudo apt install -y python3-pip python3-venv git \
    python3-dev build-essential gfortran \
    libopenblas-dev liblapack-dev

# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ OpenCV + PyTorch à¸ˆà¸²à¸ apt (à¸”à¸µà¸à¸§à¹ˆà¸² pip!)
sudo apt install -y python3-opencv python3-torch python3-torchvision
```

### 2ï¸âƒ£ à¹‚à¸„à¸¥à¸™à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ

```bash
# à¹‚à¸„à¸¥à¸™ repository
git clone https://github.com/sitta07/pilltrack-app.git
cd pilltrack-app

# à¸ªà¸£à¹‰à¸²à¸‡ Virtual Environment
python3 -m venv myenv
source myenv/bin/activate
```

### 3ï¸âƒ£ à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Dependencies (AUTOMATED - RECOMMENDED)

**à¹ƒà¸Šà¹‰ script à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´ (à¹à¸™à¸°à¸™à¸³):**
```bash
# Script à¸ˆà¸°à¸—à¸³à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¸£à¸§à¸¡ fix numpy error)
bash install_pi5_python313.sh

# à¸«à¸£à¸·à¸­ manual steps:
chmod +x install_pi5_python313.sh
./install_pi5_python313.sh
```

**à¸«à¸£à¸·à¸­à¸—à¸³à¹€à¸­à¸‡ (manual):**
```bash
# Step 1: Upgrade pip
pip install --upgrade pip setuptools wheel

# Step 2: Install numpy with pre-built wheels (FIX FOR ERROR)
pip install numpy==2.1.3 --prefer-binary --no-cache-dir

# Step 3: Install other packages
pip install -r requirements_pi5.txt --prefer-binary --no-cache-dir

# Step 4: Install YOLO
pip install ultralytics

# Step 5: Verify installation
python3 check_pi5_setup.py
```

### âš¡ à¸«à¸²à¸à¸žà¸šà¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” numpy

ðŸ‘‰ **à¸”à¸¹**: `NUMPY_BUILD_ERROR_FIX.md` à¹€à¸žà¸·à¹ˆà¸­à¹à¸™à¸§à¸—à¸²à¸‡à¹à¸à¹‰à¹„à¸‚

---

## ðŸ“ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ

```
pilltrack-app/
â”œâ”€â”€ phase1_database_preparation_pi5.py    â† à¸ªà¸£à¹‰à¸²à¸‡ database
â”œâ”€â”€ phase2_live_inference_pi5.py          â† à¸£à¸±à¸™à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡
â”œâ”€â”€ requirements_pi5.txt                  â† dependencies à¸‚à¸­à¸‡ Pi
â”œâ”€â”€ drug-scraping-c/                      â† à¸£à¸¹à¸›à¸ à¸²à¸žà¸¢à¸² (1000+ à¸Šà¸™à¸´à¸”)
â”‚   â”œâ”€â”€ Androxsil/
â”‚   â”œâ”€â”€ berlontin 300 mg/
â”‚   â””â”€â”€ ... (à¸¢à¸²à¸Šà¸™à¸´à¸”à¸­à¸·à¹ˆà¸™ à¹†)
â”œâ”€â”€ faiss_database/                       â† output (à¸ªà¸£à¹‰à¸²à¸‡à¸ˆà¸²à¸à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 1)
â”‚   â”œâ”€â”€ drug_index.faiss                  (6 MB)
â”‚   â”œâ”€â”€ metadata.json                     (10 KB)
â”‚   â””â”€â”€ multiscale_features.pkl           (18 MB)
â””â”€â”€ README.md
```

---

## âš¡ à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹ƒà¸Šà¹‰ (3 à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™)

### à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 1ï¸âƒ£: à¸ªà¸£à¹‰à¸²à¸‡ Database (à¸—à¸³à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§)

```bash
# à¹€à¸›à¸´à¸” terminal
cd ~/pilltrack-app
source venv/bin/activate

# à¸£à¸±à¸™à¸à¸²à¸£à¹€à¸•à¸£à¸µà¸¢à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
python3 phase1_database_preparation_pi5.py

# â±ï¸ à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸² ~2-4 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡ (à¸‚à¸¶à¹‰à¸™à¸­à¸¢à¸¹à¹ˆà¸à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™à¸¢à¸²)
# âœ… à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œ: faiss_database/ à¸žà¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¹ƒà¸Šà¹‰à¸‡à¸²à¸™
```

**à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢:**
- âŒ à¸¥à¸šà¸žà¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸£à¸¹à¸›à¸ à¸²à¸žà¸¢à¸²
- âœ… à¸ªà¸£à¹‰à¸²à¸‡ 10 à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™à¸‚à¸­à¸‡à¸ à¸²à¸žà¹à¸•à¹ˆà¸¥à¸°à¸Šà¸™à¸´à¸” (augmentation)
- âœ… à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚à¸žà¸´à¹€à¸¨à¸© (features)
- âœ… à¸ªà¸£à¹‰à¸²à¸‡ index à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¹€à¸£à¹‡à¸§

### à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 2ï¸âƒ£: à¸£à¸±à¸™à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡

```bash
# à¹€à¸›à¸´à¸” terminal à¹ƒà¸«à¸¡à¹ˆ
cd ~/pilltrack-app
source venv/bin/activate

# à¸£à¸±à¸™à¸£à¸°à¸šà¸šà¸£à¸°à¸šà¸¸à¸¢à¸²
python3 phase2_live_inference_pi5.py

# ðŸ“· à¸ˆà¸°à¹€à¸«à¹‡à¸™à¸à¸¥à¹‰à¸­à¸‡à¸¡à¸µà¸«à¸±à¸§à¸•à¸±à¸”à¸à¸³à¸«à¸™à¸”:
# - ðŸŸ¢ à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§ = à¸£à¸¹à¹‰à¸¢à¸² (à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ > 0.75)
# - ðŸŸ¡ à¸ªà¸µà¹€à¸«à¸¥à¸·à¸­à¸‡ = à¹„à¸¡à¹ˆà¹à¸™à¹ˆà¹ƒà¸ˆ (à¸­à¸²à¸ˆà¹ƒà¸«à¹‰à¸šà¸£à¸´à¸à¸²à¸£à¸”à¹‰à¸§à¸¢à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆà¸ªà¸­à¸‡à¸­à¸µà¸)
# - ðŸ”´ à¸ªà¸µà¹à¸”à¸‡ = à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸¢à¸²

# à¸à¸” 'q' à¹€à¸žà¸·à¹ˆà¸­à¸­à¸­à¸
```

**à¸¥à¸±à¸à¸©à¸“à¸°à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™:**
- âœ… à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¢à¸²à¸ˆà¸²à¸à¸à¸¥à¹‰à¸­à¸‡
- âœ… à¸ªà¸à¹‡à¸­à¸•à¸ à¸²à¸žà¸¢à¸²
- âœ… à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸²à¹€à¸«à¸¡à¸·à¸­à¸™
- âœ… à¹à¸ªà¸”à¸‡à¸Šà¸·à¹ˆà¸­à¸¢à¸² + à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ
- âœ… à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§: 12-18 FPS à¸šà¸™ Pi 5 (à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¸Šà¹‰à¸²à¸à¸§à¹ˆà¸² GPU à¹à¸•à¹ˆà¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸”à¸µ)

### à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 3ï¸âƒ£ (à¸—à¸”à¸ªà¸­à¸š - à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸)

```bash
# à¸—à¸”à¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§ + à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸)
python3 evaluation_module.py

# ðŸ“Š à¸”à¸¹à¸œà¸¥à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”:
# - à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§ (FPS)
# - à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (accuracy)
# - à¹€à¸§à¸¥à¸²à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥
```

---

## ðŸ”§ à¸›à¸£à¸±à¸šà¹à¸•à¹ˆà¸‡à¸ªà¸³à¸«à¸£à¸±à¸š Pi 5

### à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰à¹€à¸£à¹‡à¸§à¸‚à¸¶à¹‰à¸™:

```python
# à¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œ phase2_live_inference_pi5.py à¹à¸à¹‰à¹„à¸‚:
FPS_TARGET = 12  # à¸¥à¸”à¸ˆà¸²à¸ 15 à¹€à¸›à¹‡à¸™ 12 (à¹€à¸£à¹‡à¸§à¸‚à¸¶à¹‰à¸™)
BATCH_SIZE = 1   # à¸¢à¸±à¸‡à¸„à¸‡à¸›à¸¥à¹ˆà¸­à¸¢à¹„à¸§à¹‰à¸—à¸µà¹ˆ 1
```

### à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™:

```python
# à¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œ phase2_live_inference_pi5.py à¹à¸à¹‰à¹„à¸‚:
accept_threshold = 0.80  # à¹€à¸žà¸´à¹ˆà¸¡à¸ˆà¸²à¸ 0.75 (à¸«à¸™à¸±à¸à¸à¸§à¹ˆà¸²)
partial_threshold = 0.65  # à¹€à¸žà¸´à¹ˆà¸¡à¸ˆà¸²à¸ 0.60
```

### à¸«à¸²à¸à¸à¸¥à¹‰à¸­à¸‡ Picamera2 à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™:

```python
# à¸£à¸°à¸šà¸šà¸ˆà¸°à¹ƒà¸Šà¹‰ OpenCV à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
# à¹à¸•à¹ˆà¸•à¹ˆà¸­ USB Webcam à¸à¹‡à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¹€à¸Šà¹ˆà¸™à¸à¸±à¸™
```

---

## ðŸ“Š à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¸„à¸²à¸”à¸«à¸§à¸±à¸‡

| à¸ªà¹ˆà¸§à¸™à¸›à¸£à¸°à¸à¸­à¸š | à¹€à¸§à¸¥à¸² (ms) | à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸ |
|-----------|---------|---------|
| à¸šà¸±à¸™à¸—à¸¶à¸à¸ à¸²à¸ž | 3-5 | à¸­à¸²à¸ˆà¸Šà¹‰à¸²à¸à¸§à¹ˆà¸² Pi 4 à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ |
| à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸š YOLO | 50-80 | à¸‚à¸¶à¹‰à¸™à¸­à¸¢à¸¹à¹ˆà¸à¸±à¸šà¸‚à¸™à¸²à¸”à¸ à¸²à¸ž |
| à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸² | 2-3 | à¸›à¸£à¸±à¸šà¸‚à¸™à¸²à¸” + padding |
| à¸ªà¸à¸±à¸”à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´ | 30-40 | CPU à¸Šà¹‰à¸²à¸à¸§à¹ˆà¸² GPU |
| à¸„à¹‰à¸™à¸«à¸² FAISS | 5-10 | à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸³à¸à¸±à¸” 1000 à¸¢à¸² |
| **à¸£à¸§à¸¡** | **100-150 ms** | **â‰ˆ 12-15 FPS** |

âš ï¸ **à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸**: Pi 5 à¸Šà¹‰à¸²à¸à¸§à¹ˆà¸² GPU (~30 FPS) à¹à¸•à¹ˆà¸¢à¸±à¸‡à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™

---

## ðŸ› à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: NumPy Build Error (Python 3.13)
```
error: subprocess-exited-with-error
Getting requirements to build wheel did not run successfully.
```

**à¸§à¸´à¸˜à¸µà¹à¸à¹‰:**
```bash
# à¹ƒà¸Šà¹‰ pre-built wheels (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ compile)
pip install numpy==2.1.3 --prefer-binary --no-cache-dir

# à¸«à¸£à¸·à¸­à¹ƒà¸Šà¹‰ automatic script
bash install_pi5_python313.sh

# à¸”à¸¹: NUMPY_BUILD_ERROR_FIX.md à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸´à¸˜à¸µà¸­à¸·à¹ˆà¸™ à¹†
```

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "ModuleNotFoundError: No module named 'torch'"

```bash
# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ PyTorch à¸ˆà¸²à¸ apt (à¹€à¸£à¹‡à¸§à¸à¸§à¹ˆà¸² + à¹„à¸¡à¹ˆà¸¡à¸µ error)
sudo apt install -y python3-torch python3-torchvision

# à¸«à¸£à¸·à¸­ à¸ˆà¸²à¸à¸— pip
pip install torch --prefer-binary
```

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "cannot import name 'YOLO'"

```bash
# à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ ultralytics
pip install -U ultralytics
```

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "Camera not found"

```bash
# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸¥à¹‰à¸­à¸‡ Pi
libcamera-hello -t 5

# à¸«à¸£à¸·à¸­à¸ªà¸³à¸«à¸£à¸±à¸š USB Webcam
ls /dev/video*
```

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "Out of Memory"

```bash
# à¸¥à¸” BATCH_SIZE à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡
# à¹à¸à¹‰à¹„à¸‚: BATCH_SIZE = 1 (à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸™à¹‰à¸­à¸¢à¸ªà¸¸à¸”)

# à¸«à¸£à¸·à¸­ à¸›à¸´à¸”à¹à¸­à¸›à¸­à¸·à¹ˆà¸™ à¹†
sudo systemctl stop apache2

# à¸”à¸¹à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸«à¸™à¹ˆà¸§à¸¢à¸„à¸§à¸²à¸¡à¸ˆà¸³
free -h
```

### âŒ à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "FAISS index not found"

```bash
# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹ƒà¸«à¹‰à¹à¸™à¹ˆà¹ƒà¸ˆà¸§à¹ˆà¸²à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 1 à¸à¹ˆà¸­à¸™
ls faiss_database/

# à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¡à¸µ à¹ƒà¸«à¹‰à¸£à¸±à¸™à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡:
python3 phase1_database_preparation_pi5.py
```

### âš ï¸ à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡

```bash
# à¸¥à¸”à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆà¸‚à¸­à¸‡à¸à¸²à¸£à¸¢à¸­à¸¡à¸£à¸±à¸š (à¸—à¸³à¹ƒà¸«à¹‰à¸­à¹ˆà¸­à¸™à¹à¸­à¸à¸§à¹ˆà¸²)
# à¹à¸à¹‰à¹„à¸‚: accept_threshold = 0.60  # à¸¥à¸”à¸ˆà¸²à¸ 0.75

# à¸«à¸£à¸·à¸­ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸£à¸¹à¸›à¸ à¸²à¸žà¹ƒà¸™à¸à¸¥à¹‰à¸­à¸‡
# - à¹à¸ªà¸‡à¹€à¸žà¸µà¸¢à¸‡à¸žà¸­à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
# - à¸¡à¸¸à¸¡à¸à¸¥à¹‰à¸­à¸‡à¸”à¸µà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
```

---

## ðŸ“ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

### à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆ 1: à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸¢à¸²à¸ˆà¸²à¸à¸£à¸¹à¸›à¸ à¸²à¸žà¹€à¸”à¸µà¸¢à¸§

```bash
# à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ test_single.py
cat > test_single.py << 'EOF'
import cv2
from phase2_live_inference_pi5 import *

# à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›
frame = cv2.imread('test_image.jpg')

# à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸°à¸šà¸š
detector = YOLODrugDetector('best_process_2.onnx')
preprocessor = DrugPreprocessor()
extractor = BatchFeatureExtractor()
searcher = FAISSSearcher('faiss_database/drug_index.faiss',
                         'faiss_database/metadata.json')

# à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸š
detections = detector.detect(frame)
for det in detections:
    crop = det['crop']
    preprocessed = preprocessor.preprocess(crop)
    features = extractor.extract_batch([preprocessed])
    result = searcher.search(features[0])
    print(f"à¸¢à¸²: {result['top_1']} (à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆ {result['top_1_conf']:.2f})")
EOF

python3 test_single.py
```

### à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸µà¹ˆ 2: à¸šà¸±à¸™à¸—à¸¶à¸à¸§à¸´à¸”à¸µà¹‚à¸­à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´

```bash
# à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ record_inference.py
cat > record_inference.py << 'EOF'
import cv2
from phase2_live_inference_pi5 import LiveInferencePipeline

pipeline = LiveInferencePipeline()
pipeline.camera.start()
pipeline.camera.start_capture_thread()

# à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¸§à¸´à¸”à¸µà¹‚à¸­
fourcc = cv2.VideoWriter_fourcc(*'mp4v')
out = cv2.VideoWriter('output.mp4', fourcc, 10.0, (640, 480))

frame_count = 0
while frame_count < 300:  # 30 à¸§à¸´
    frame = pipeline.camera.get_frame()
    if frame is not None:
        out.write(frame)
        frame_count += 1

out.release()
pipeline.camera.stop()
print("âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸ªà¸£à¹‡à¸ˆ: output.mp4")
EOF

python3 record_inference.py
```

---

## ðŸ’¡ à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¹ƒà¸Šà¹‰à¸‡à¸²à¸™

### âœ¨ à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¸—à¸µà¹ˆ 1: à¸„à¸§à¸²à¸¡à¸ªà¸§à¸²à¸‡à¸‚à¸­à¸‡à¸à¸¥à¹‰à¸­à¸‡

```bash
# à¸„à¸§à¸²à¸¡à¸ªà¸§à¹ˆà¸²à¸‡ = à¸„à¸°à¹à¸™à¸™ à¸–à¹‰à¸²à¹à¸ªà¸‡à¸¡à¸µà¹ˆà¸¢à¸¡ à¸£à¸°à¸šà¸šà¸ˆà¸°à¸•à¸­à¸šà¸–à¸¹à¸à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™
# ðŸ’¡ à¹ƒà¸Šà¹‰à¹à¸ªà¸‡à¸˜à¸£à¸£à¸¡à¸Šà¸²à¸•à¸´ à¸«à¸£à¸·à¸­ LED à¸—à¸µà¹ˆà¸¢à¸±à¹ˆà¸‡à¸¢à¸·à¸™
```

### âœ¨ à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¸—à¸µà¹ˆ 2: à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸à¸¥à¹‰à¸­à¸‡

```bash
# à¸£à¸°à¸¢à¸°à¸«à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸à¸¥à¹‰à¸­à¸‡: 20-30 à¸‹à¸¡.
# à¹„à¸¡à¹ˆà¹ƒà¸à¸¥à¹‰à¹€à¸à¸´à¸™à¹„à¸› (à¸ à¸²à¸žà¹€à¸šà¸¥à¸­)
# à¹„à¸¡à¹ˆà¹„à¸à¸¥à¹€à¸à¸´à¸™à¹„à¸› (à¸¢à¸²à¹€à¸¥à¹‡à¸à¹€à¸à¸´à¸™à¹„à¸›)
```

### âœ¨ à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¸—à¸µà¹ˆ 3: à¸¥à¸šà¹€à¸§à¸¥à¸²à¸£à¸­

```bash
# à¸–à¹‰à¸²à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸§à¹ˆà¸²à¸Šà¹‰à¸² à¹ƒà¸«à¹‰à¸›à¸´à¸” FAISS log
# à¹à¸à¹‰à¹„à¸‚à¹ƒà¸™à¹‚à¸„à¹‰à¸”: logger.setLevel(logging.WARNING)
```

### âœ¨ à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸šà¸—à¸µà¹ˆ 4: à¹€à¸žà¸´à¹ˆà¸¡à¸¢à¸²à¸Šà¸™à¸´à¸”à¹ƒà¸«à¸¡à¹ˆ

```bash
# 1. à¹€à¸žà¸´à¹ˆà¸¡à¸£à¸¹à¸›à¸¢à¸²à¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ drug-scraping-c/
# 2. à¸£à¸±à¸™ phase1 à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡ (à¸ˆà¸°à¸ªà¸£à¹‰à¸²à¸‡ index à¹ƒà¸«à¸¡à¹ˆ)
# 3. à¸£à¸°à¸šà¸šà¸žà¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ retrain!
```

---

## ðŸ“ž à¸šà¸±à¸™à¸—à¸¶à¸à¸—à¸±à¹ˆà¸§à¹„à¸›

| à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ | à¸ªà¸²à¹€à¸«à¸•à¸¸ | à¹à¸™à¸§à¸—à¸²à¸‡à¹à¸à¹‰à¹„à¸‚ |
|---------|-------|-----------|
| à¸£à¸°à¸šà¸šà¸Šà¹‰à¸² | CPU à¹„à¸¡à¹ˆà¸žà¸­ | à¸¥à¸” BATCH_SIZE à¸«à¸£à¸·à¸­ FPS_TARGET |
| à¸•à¸­à¸šà¸œà¸´à¸” | à¹à¸ªà¸‡à¹„à¸¡à¹ˆà¸”à¸µ | à¹€à¸žà¸´à¹ˆà¸¡à¹à¸ªà¸‡ à¸«à¸£à¸·à¸­à¸¥à¸”à¸„à¹ˆà¸² threshold |
| à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸à¸¢à¸² | à¸¢à¸²à¹„à¸¡à¹ˆà¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ DB | à¹€à¸žà¸´à¹ˆà¸¡à¸£à¸¹à¸›à¸¢à¸² + à¸£à¸±à¸™ phase1 à¹ƒà¸«à¸¡à¹ˆ |
| à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸” RAM | à¸à¸²à¸£à¸£à¸±à¹ˆà¸§à¹„à¸«à¸¥ | à¸›à¸´à¸” terminal à¸­à¸·à¹ˆà¸™ à¹† à¹à¸¥à¸° restart |

---

## ðŸ“š à¹„à¸Ÿà¸¥à¹Œà¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸

- `phase1_database_preparation_pi5.py` â†’ à¸ªà¸£à¹‰à¸²à¸‡ database (à¹ƒà¸Šà¹‰à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§)
- `phase2_live_inference_pi5.py` â†’ à¸£à¸±à¸™à¸£à¸°à¸šà¸šà¸ˆà¸£à¸´à¸‡ (à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡)
- `requirements_pi5.txt` â†’ à¸£à¸²à¸¢à¸à¸²à¸£ dependencies à¸ªà¸³à¸«à¸£à¸±à¸š Pi
- `faiss_database/` â†’ à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¢à¸² (à¸ªà¸£à¹‰à¸²à¸‡à¸ˆà¸²à¸à¸‚à¸±à¹‰à¸™à¸—à¸µà¹ˆ 1)
- `drug-scraping-c/` â†’ à¸£à¸¹à¸›à¸ à¸²à¸žà¸¢à¸² (input)

---

## âœ… à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°

```bash
# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Python
python3 --version

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š PyTorch
python3 -c "import torch; print(torch.__version__)"

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š YOLO
python3 -c "from ultralytics import YOLO; print('âœ… YOLO OK')"

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š FAISS
python3 -c "import faiss; print(f'âœ… FAISS {faiss.__version__}')"

# à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸à¸¥à¹‰à¸­à¸‡
python3 -c "import cv2; c = cv2.VideoCapture(0); print('âœ… Camera OK' if c.isOpened() else 'âŒ Camera Failed')"
```

---

## ðŸŽ‰ à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§!

```
âœ… à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies
âœ… à¸ªà¸£à¹‰à¸²à¸‡ database (phase 1)
âœ… à¸£à¸±à¸™à¸£à¸°à¸šà¸šà¸ˆà¸£à¸´à¸‡ (phase 2)
âœ… à¸—à¸”à¸ªà¸­à¸šà¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œ

à¸žà¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ PillTrack à¸šà¸™ Raspberry Pi 5 à¹à¸¥à¹‰à¸§! ðŸš€
```

---

**ðŸ“… à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸„à¸£à¸±à¹‰à¸‡à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢**: à¸˜à¸±à¸™à¸§à¸²à¸„à¸¡ 2025  
**ðŸ“ à¸ªà¸–à¸²à¸™à¸°**: âœ… à¸žà¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Raspberry Pi 5
